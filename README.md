# Robot Path Planning Visualization
A testing ground for path planning strategies for ROS.

## Future Work
- Release 0.1.0
    - [X] Implement as GUI
        - [X] Import map from yaml & pgm file
        - [X] Update obstacle inflation in interface
        - [X] Toggle between implemented algorithms or run all (disable visualization of travelled nodes) 
        - [X] Provide results data including time duration, distance, travelled nodes, and nodes of the selected path
        - [X] Use text box to set start or goal position
        - [X] Set start or goal position using mouse click (enabled by button)
        - [X] Update map with new obstacles or delete them (with inflation) 
    - Bug Fixes/Optimizations    
        - [X] Implement multi-threading for running algorithms 
        - [X] Terminate algorithm if it runs for more than 10 minutes 
        - [X] Reduce code redundancies
        - [ ] Fix eraser outline to scale with size
    - Testing
        - [X] Test when the start or end point is invalid
        - [X] Test when the max number of iterations is too small with RRT*
        - [ ] Yaml and pgm parsing
- Release 0.2.0
    - Command Line Scripts
        - [ ] Implement D* Lite algorithm
    - GUI
        - [ ] Change behavior of Add/remove obstacles to be more like a pen or eraser
        - [ ] [Optional] Animate traversal of map and final path
    - Bug Fixes/Optimizations
        - [ ] Add more extensive error handling for GUI
    - Testing
        - [ ] Test D* Replan with changing map
        - [ ] Rewrite tests with GTest

## Dependencies
- CMake
- OpenCV
- Qt6

## Quick Start
1. Install dependencies:
    ```
    # Ubuntu
    sudo apt -y install libopencv-dev build-essential libgl1-mesa-dev qt6-base-dev qt6-tools-dev libqt6svg6-dev
    ```
    [//]: # (2. Compile code and generate executables:)
    [//]: # (```)
    [//]: # (make)
    [//]: # (```)
2. Build Executables
    ```
    cmake .
    make
    ```
3. Run executable files

## Usage
This project can be run as a GUI or as a script. 

### GUI
To open the GUI run this command:
```
./rpp_viz
```

![](/resources/graphics/gui.png)

Features
 - Upload ROS maps (.yaml file paired with a .pgm file)
 - Dynamically inflation the size of obstacles
 - Add or remove obstacles from map
 - Set algorithm (if the "All" option is chosen the results will be color coded)
    - Set the maximum number of iterations for sample-based algoirthms
 - Set the start and goal positions
 - View results for comparison
 - Show some debug data for algorithms

### Script
This script requires the user to specify a yaml file for map information, the name of algorithm being used, and the start & end position. Certain algorithms require the user to specify the number of iterations to reduce the likelihood of an infinite loop (by default it is set to 10,000). If the map has thin or unexpected broken boudnaries it may also be benefitial to inflate their size to remedy this issue(by default boundaries are inflated by a 3x3 matrix). Look below for a more thorough breakdown of the possible commands for this script.
```
./rpp_cli -h

# Ouptut
Description: A simple script to test different path planning algorithms.
options: 
   -h, --help                            Show this help message and exit.
   -f FILE, --file FILE                  Provide map yaml filepath.
   -i INFLATE_SIZE. --inflate-size INFLATE_SIZE
                                         Set size of boundaries (Default: 3).
   -a ALGORITHM, --algorithm ALGORITHM   Set executed algoritm to one of the following:
                                         [bfs, a-star, rrt-star, all].
   -l MAX_ITER, --max-iter MAX_ITER      Set limit the number of iterations executed.
                                         Only supported for sample-based methods (Default: 10000).
   -s START_POS, --start-pos START_POS   Set start position [Format: "int,int"].
   -e END_POS, --end-pos END_POS         Set end position [Format: "int,int"].
   -d, --debug                           Provide more information for debugging.
   -t TIMEOUT, timeout TIMEOUT           Set timeout limit for algorithm computation
                                         (Default: 600000 ms).
```

Example execution:
```
./rpp_cli -f "/path/to/example1.yaml" -i 5 -a "rrt-star" -l 10000 -s "300,50" -e "381,360" -d
```

## Maps
Maps are based on a occupancy grid generated by the slam_toolbox ROS package. Therefore a yaml and pgm file are necessary to retreive the map data.

## Algorithms Tested
### Graph Search Algorithms
- [BFS](https://en.wikipedia.org/wiki/Breadth-first_search)

    ![](/resources/graphics/BFS.png)

- [A*](https://en.wikipedia.org/wiki/A*_search_algorithm)

    ![](/resources/graphics/A_star.png)

### Sampling-Based Algorithms
- [RRT* (graph-based implementation)](https://arxiv.org/pdf/1105.1186)

    ![](/resources/graphics/RRT_star.png)
