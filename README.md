# Robot Path Planning Visualization
A testing ground for path planning strategies for ROS.

## TODO
- [ ] Command Line Scripts
    - [ ] Implement D* Lite algorithm
    - [ ] Write a script to generate fake map yaml and pgm based on double array 
    - [ ] Implement more tests 
        - [ ] Yaml and pgm parsing
        - [X] Test when the start or end point is invalid
        - [X] Test when the max number of iterations is too small with RRT*
        - [ ] Test D* Replan with changing map
    - [ ] Rewrite tests with GTest
- [ ] Implement as GUI
    - [ ] Import map from yaml & pgm file
    - [ ] Update map with new obstacles or delete them (with inflation)
    - [ ] Update the inflate boundary in interface
    - [X] Click map (or use text box) to set start and goal position
    - [X] Toggle between implemented algorithms or run all (disable visualization travelled nodes) 
    - [X] Provide results data including time duration, distance, travelled nodes, and nodes of the selected path
    - [ ] animate traversal of map and final path
    - [ ] Add Error Handling

## Dependencies
- CMake
- OpenCV
- gtkmm

## Quick Start
1. Install dependencies:
    ```
    # Ubuntu
    sudo apt-get install libgtkmm-4.0-dev libopencv-dev
    ```
2. Compile code and generate executables:
    ```
    make
    ```

## Usage
This project can be run as a GUI or as a script. 

### GUI
To open the GUI run this command:
```
.\rpp_viz
```

![](/img/gui.png)

Features
 - change upload map (yaml pointint pgm file)
 - add/remove obstacles
 - dynamic update inflation of the obstacles
 - change the algorithm used
 - set a maximum number of iterations for an algoirthm
 - set the start and goal positions
 - view results for comparison

### Script
This script requires the user to specify a yaml file for map information, the name of algorithm being used, and the start & end position. Certain algorithms require the user to specify the number of iterations to reduce the likelihood of an infinite loop (by default it is set to 10,000). If the map has thin or unexpected broken boudnaries it may also be benefitial to inflate their size to remedy this issue(by default boundaries are inflated by a 3x3 matrix). Look below for a more thorough breakdown of the possible commands for this script.
```
./rpp_cli -h

# Ouptut
Description: A simple script to test different path planning algorithms.
options: 
   -h, --help                            Show this help message and exit.
   -f FILE, --file FILE                  Provide map yaml filepath.
   -i INFLATE_SIZE. --inflate-size INFLATE_SIZE
                                         Set size of boundaries (Default: 3).
   -a ALGORITHM, --algorithm ALGORITHM   Set executed algoritm to one of the following: 
                                         [bfs, a-star, rrt-star, all].
   -l MAX_ITER, --max-iter MAX_ITER      Set limit the number of iterations executed.
                                         Only supported for sample-based methods (Default: 10000).
   -s START_POS, --start-pos START_POS   Set start position [Format: "int,int"].
   -e END_POS, --end-pos END_POS         Set end position [Format: "int,int"].
   -d, --debug                           Provide more information for debugging.
```

Example execution:
```
./rpp_cli -f "./maps/example1.yaml" -i 3 -a "rrt-star" -l 10000 -s "300,50" -e "381,360" -d
```

## Maps
Maps are based on a occupancy grid generated by the slam_toolbox ROS package. Therefore a yaml and pgm file are necessary to retreive the map data.

## Algorithms Tested
### Graph Search Algorithms
- [BFS](https://en.wikipedia.org/wiki/Breadth-first_search)

    ![](/img/BFS.png)

- [A*](https://en.wikipedia.org/wiki/A*_search_algorithm)

    ![](/img/A_star.png)

### Sampling-Based Algorithms
- [RRT* (graph-based implementation)](https://arxiv.org/pdf/1105.1186)

    ![](/img/RRT_star.png)